# CVerifier 项目路线图

| 文档版本 | 日期 | 作者 | 变更说明 |
|---------|------|------|---------|
| 0.1.0 | 2025-01-28 | CVerifier Team | 初始版本 |

---

## 目录

- [1. 总体规划](#1-总体规划)
  - [1.1 项目周期](#11-项目周期)
  - [1.2 阶段划分](#12-阶段划分)
  - [1.3 里程碑定义](#13-里程碑定义)
- [2. MVP 阶段](#2-mvp-阶段)
  - [2.1 目标](#21-目标)
  - [2.2 功能列表](#22-功能列表)
  - [2.3 关键任务](#23-关键任务)
  - [2.4 交付物](#24-交付物)
  - [2.5 验收标准](#25-验收标准)
- [3. 功能增强阶段](#3-功能增强阶段)
  - [3.1 目标](#31-目标)
  - [3.2 新增功能](#32-新增功能)
  - [3.3 交付物](#33-交付物)
  - [3.4 验收标准](#34-验收标准)
- [4. 工业质量阶段](#4-工业质量阶段)
  - [4.1 目标](#41-目标)
  - [4.2 新增功能](#42-新增功能)
  - [4.3 交付物](#43-交付物)
  - [4.4 验收标准](#44-验收标准)
- [5. 高级特性阶段](#5-高级特性阶段)
  - [5.1 未来功能](#51-未来功能)
  - [5.2 技术演进方向](#52-技术演进方向)
- [6. 里程碑](#6-里程碑)
  - [6.1 关键时间节点](#61-关键时间节点)
  - [6.2 里程碑检查点](#62-里程碑检查点)
- [7. 资源需求](#7-资源需求)
  - [7.1 人力资源](#71-人力资源)
  - [7.2 技术资源](#72-技术资源)
  - [7.3 时间资源](#73-时间资源)
- [8. 风险管理](#8-风险管理)
  - [8.1 技术风险](#81-技术风险)
  - [8.2 进度风险](#82-进度风险)
  - [8.3 应对措施](#83-应对措施)

---

## 1. 总体规划

### 1.1 项目周期

**总时长**：12-16 周（约 3-4 个月）

**时间分配**：
- MVP 阶段：4-6 周
- 功能增强阶段：6-8 周
- 工业质量阶段：8-12 周
- 高级特性阶段：持续迭代

### 1.2 阶段划分

| 阶段 | 时间 | 核心目标 | 优先级 |
|------|------|---------|--------|
| **MVP** | 第 1-6 周 | 验证核心概念 | P0 |
| **功能增强** | 第 7-12 周 | 提高检测能力 | P0-P1 |
| **工业质量** | 第 13-20 周 | 达到工业应用水平 | P1 |
| **高级特性** | 第 21 周+ | 持续改进 | P2-P3 |

### 1.3 里程碑定义

| 里程碑 | 时间点 | 标志 |
|--------|--------|------|
| **M1: MVP 完成** | 第 6 周结束 | 能检测简单漏洞 |
| **M2: 功能增强** | 第 12 周结束 | 支持 4 类漏洞 |
| **M3: 工业质量** | 第 20 周结束 | 生产可用 |
| **M4: 正式发布** | 第 24 周结束 | v1.0 发布 |

---

## 2. MVP 阶段

**时间**：第 1-6 周（约 1.5 个月）

### 2.1 目标

**总体目标**：验证核心概念，实现最小可行产品

**具体目标**：
1. 能够解析 C 代码并生成 LLIR
2. 实现基础符号执行引擎
3. 实现简单的漏洞检测（静态数组溢出、显式 NULL 解引用）
4. 生成可读的分析报告

### 2.2 功能列表

#### 第 1-2 周：项目搭建 + Clang 集成

**任务**：
- [x] 创建项目骨架
- [x] 编写 CMakeLists.txt
- [x] 集成 LLVM/Clang
- [x] 实现简单的 C 代码解析
- [x] 生成 LLVM IR

**交付物**：
- 项目结构
- CMake 构建系统
- Clang 集成代码
- 第一个测试用例通过

#### 第 3-4 周：LLIR 设计 + 符号执行框架

**任务**：
- [x] 设计 LLIR 数据结构
- [x] 实现 LLVM IR → LLIR 转换
- [x] 构建控制流图（CFG）
- [x] 实现符号表达式系统
- [x] 实现符号状态管理
- [x] 实现 DFS 路径探索

**交付物**：
- LLIR 模块
- 符号执行框架
- 单元测试

#### 第 5-6 周：Z3 集成 + 基础漏洞检测

**任务**：
- [x] 集成 Z3 SMT 求解器
- [x] 实现约束求解接口
- [x] 实现缓冲区溢出检测（静态数组）
- [x] 实现空指针解引用检测
- [x] 实现基础报告生成

**交付物**：
- Z3 集成
- 2 个检测器
- MVP 测试套件通过

### 2.3 关键任务

| 任务 | 负责人 | 优先级 | 依赖 |
|------|--------|--------|------|
| 项目搭建 | 核心开发者 | P0 | 无 |
| Clang 集成 | 核心开发者 | P0 | 项目搭建 |
| LLIR 设计 | 核心开发者 | P0 | Clang 集成 |
| 符号执行框架 | 核心开发者 | P0 | LLIR 设计 |
| Z3 集成 | 核心开发者 | P0 | 符号执行框架 |
| 漏洞检测器 | 核心开发者 | P0 | Z3 集成 |

### 2.4 交付物

**代码**：
- 完整的源代码
- 单元测试（覆盖率 ≥ 40%）
- 集成测试（≥ 10 个）

**文档**：
- README.md
- 安装指南
- 用户手册（初版）
- API 文档（公共接口）

**其他**：
- CI/CD 配置（可选）
- Docker 镜像（可选）

### 2.5 验收标准

#### 功能验收

- [ ] 能够解析标准 C 代码文件
- [ ] 能够检测简单数组越界（准确率 ≥ 60%）
- [ ] 能够检测显式 NULL 指针解引用（准确率 ≥ 70%）
- [ ] 生成可读的错误报告

#### 性能验收

- [ ] 能够分析 ≥ 100 行的函数
- [ ] 简单函数分析时间 ≤ 30 秒
- [ ] 内存占用 ≤ 200 MB

#### 质量验收

- [ ] 无致命 Bug（P0）
- [ ] P1/P2 Bug ≤ 5 个
- [ ] 通过 10 个基础测试用例

---

## 3. 功能增强阶段

**时间**：第 7-12 周（约 1.5 个月）

### 3.1 目标

**总体目标**：提高检测能力，支持更多漏洞类型

**具体目标**：
1. 实现抽象解释框架
2. 支持动态内存漏洞检测
3. 支持内存泄漏检测
4. 支持整数溢出检测
5. 优化路径探索和状态管理

### 3.2 新增功能

#### 第 7-8 周：抽象解释框架 + 浮点检测 ⭐新增

**任务**：
- [ ] 实现抽象域接口
- [ ] 实现常量域
- [ ] 实现区间域
- [ ] 实现不动点迭代器
- [ ] 实现传递函数
- [ ] **浮点溢出检测（IEEE 754）** ⭐新增
  - [ ] NaN 产生和传播检测
  - [ ] Inf 产生和传播检测
  - [ ] 精度损失检测
  - [ ] 舍入误差检测
- [ ] **除零错误检测** ⭐新增
  - [ ] 整数除以零检测
  - [ ] 浮点除以零检测

**交付物**：
- 抽象解释模块
- 2 个抽象域
- 浮点溢出检测器
- 除零检测器
- 单元测试

#### 第 9-10 周：混合分析 + 动态内存 + 规约系统 ⭐新增

**任务**：
- [ ] 实现混合分析策略
- [ ] 抽象解释剪枝
- [ ] 状态合并算法
- [ ] 堆溢出检测
- [ ] Use-after-free 检测
- [ ] **规约系统（ACSL）** ⭐新增
  - [ ] ACSL 注解解析器
  - [ ] C 语言验证 API 实现
  - [ ] 验证函数库（内存、数值、浮点）
  - [ ] 规约代码隔离机制
  - [ ] 规约测试用例

**交付物**：
- 混合分析器
- 堆分析模块
- **规约系统模块** ⭐新增
  - `specs/verification.h`
  - `specs/libverification.so`
  - ACSL 解析器
- 测试用例

#### 第 11-12 周：内存泄漏 + 整数溢出 + 插件系统 ⭐新增

**任务**：
- [ ] 内存泄漏检测
- [ ] 整数溢出检测
- [ ] Double free 检测
- [ ] 性能优化
- [ ] 完善测试用例
- [ ] **插件系统** ⭐新增
  - [ ] 插件接口定义（IPlugin）
  - [ ] 插件加载器（.so/.dll）
  - [ ] 插件配置系统
  - [ ] 插件沙箱（进程隔离）
  - [ ] 示例插件

**交付物**：
- 2 个新检测器
- **插件系统模块** ⭐新增
  - `include/cverifier/IPlugin.h`
  - `src/plugin/PluginLoader.cpp`
  - 3 个示例插件
- 性能优化
- 测试用例 ≥ 50 个

### 3.3 交付物

**代码**：
- 完整的源代码
- 单元测试（覆盖率 ≥ 50%）
- 集成测试（≥ 50 个）

**文档**：
- 用户手册（完整版）
- 开发者指南（初版）
- 架构文档

### 3.4 验收标准

#### 功能验收

- [ ] 支持 **6 类漏洞检测**（增加浮点溢出、除零） ⭐新增
- [ ] 支持规约系统（ACSL 风格） ⭐新增
- [ ] 支持插件系统（.so/.dll 动态加载） ⭐新增
- [ ] 检测准确率 ≥ 75%
- [ ] 误报率 ≤ 25%
- [ ] 支持动态内存分析
- [ ] IEEE 754 完整支持（NaN、Inf、精度损失） ⭐新增

#### 性能验收

- [ ] 分析速度 ≥ 500 行代码/分钟
- [ ] 内存占用 ≤ 500 MB
- [ ] 支持超时机制

#### 质量验收

- [ ] P0/P1 Bug = 0
- [ ] P2 Bug ≤ 5 个
- [ ] 通过 50 个集成测试用例

---

## 4. 工业质量阶段

**时间**：第 13-20 周（约 2 个月）

### 4.1 目标

**总体目标**：达到工业应用水平

**具体目标**：
1. 支持完整的 C11/C17 标准
2. 外部函数建模
3. 多线程分析
4. 性能优化
5. IDE 集成
6. **Web UI 实现** ⭐新增
7. **SARIF 报告格式** ⭐新增

### 4.2 新增功能

#### 第 13-14 周：完整 C 标准支持

**任务**：
- [ ] 支持结构体和联合体
- [ ] 支持函数指针
- [ ] 支持可变参数函数
- [ ] 支持位域
- [ ] 完善预处理支持

#### 第 15-16 周：外部函数建模

**任务**：
- [ ] 标准库函数模型库
- [ ] 常见字符串函数模型
- [ ] 内存分配函数模型
- [ ] 配置化函数建模

#### 第 17-18 周：并行分析 + 性能优化

**任务**：
- [ ] 多线程路径探索
- [ ] 约束求解缓存
- [ ] 增量分析
- [ ] 状态优化

#### 第 19-20 周：IDE 集成 + 报告格式 + Web UI ⭐新增

**任务**：
- [ ] VS Code 插件
- [ ] SARIF 报告格式
- [ ] 修复建议生成
- [ ] 性能调优
- [ ] **Web UI 后端（Crow）** ⭐新增
  - [ ] REST API 实现
  - [ ] WebSocket 服务
  - [ ] 任务调度器
  - [ ] 与核心分析引擎集成
- [ ] **Web UI 前端（React）** ⭐新增
  - [ ] 项目搭建（React + TypeScript）
  - [ ] 基础 UI 框架
  - [ ] Monaco Editor 集成
  - [ ] 任务管理界面
  - [ ] 进度监控

**交付物**：
- **Web 后端服务** ⭐新增
  - `src/web/` 模块
  - REST API 端点
  - WebSocket 服务
- **Web 前端应用** ⭐新增
  - `web-ui/` 项目
  - 任务管理页面
  - 代码编辑器页面
  - 结果查看页面

### 4.3 交付物

**代码**：
- 完整的源代码
- 单元测试（覆盖率 ≥ 60%）
- 集成测试（≥ 100 个）
- 性能测试
- **Web 前端代码** ⭐新增
- **Web 后端代码** ⭐新增

**文档**：
- 完整的用户手册
- 开发者指南（完整版）
- API 参考文档
- **Web API 文档** ⭐新增
- **插件开发指南** ⭐新增
- 示例和教程

**工具**：
- VS Code 插件
- Docker 镜像
- 安装包
- **Web UI Docker 镜像** ⭐新增

### 4.4 验收标准

#### 功能验收

- [ ] 完整 C11/C17 标准支持
- [ ] 支持 **6 类漏洞检测** ⭐新增
- [ ] 准确率 ≥ 80%
- [ ] 误报率 ≤ 20%
- [ ] 支持 SARIF 输出
- [ ] **Web UI 可用** ⭐新增
  - [ ] 支持任务管理（创建、删除、暂停、恢复）
  - [ ] 实时进度监控（延迟 < 500ms）
  - [ ] 代码编辑器集成（Monaco）
  - [ ] 漏洞结果可视化
  - [ ] 支持主流浏览器

#### 性能验收

- [ ] 分析速度 ≥ 1000 行代码/分钟
- [ ] 支持 4 线程并发
- [ ] 内存占用 ≤ 1 GB

#### 质量验收

- [ ] 通过 SV-COMP 基准测试（子集）
- [ ] 无严重 Bug
- [ ] P2 Bug ≤ 3 个

---

## 5. 高级特性阶段

**时间**：第 21 周及以后（持续迭代）

### 5.1 未来功能

#### 短期（3-6 个月）

- [ ] C++ 支持（类、对象、虚函数）
- [ ] 并发分析（线程、锁）
- [ ] 数据流分析
- [ ] Web UI 界面

#### 中期（6-12 个月）

- [ ] 过程间分析（跨函数）
- [ ] 上下文敏感分析
- [ ] 循环加速技术
- [ ] 机器学习辅助（降低误报）

#### 长期（1 年+）

- [ ] 支持其他语言（C++、Rust）
- [ ] 分布式分析
- [ ] 修复建议自动生成
- [ ] 交互式分析

### 5.2 技术演进方向

#### 性能优化

- 更高效的符号执行算法
- 更智能的路径剪枝
- GPU 加速约束求解

#### 准确率提升

- 机器学习模型辅助判断
- 更精确的抽象域
- 上下文敏感分析

#### 易用性改进

- 更友好的错误信息
- 交互式调试界面
- 一键修复功能

---

## 6. 里程碑

### 6.1 关键时间节点

| 里程碑 | 日期 | 标志事件 |
|--------|------|---------|
| **M0: 项目启动** | Week 0 | 需求确认，环境搭建 |
| **M1: MVP 完成** | Week 6 | 基础功能可用 |
| **M2: 功能增强** | Week 12 | 4 类漏洞检测 |
| **M3: 工业质量** | Week 20 | 生产可用 |
| **M4: 正式发布** | Week 24 | v1.0 发布 |

### 6.2 里程碑检查点

#### M1: MVP 完成（Week 6）

**检查项**：
- [ ] 能够解析 C 代码
- [ ] 能够检测 2 类漏洞
- [ ] 生成报告
- [ ] 通过 10 个测试用例

**决策**：
- ✅ 继续 → 进入功能增强阶段
- ⚠️ 有风险 → 调整计划

#### M2: 功能增强（Week 12）

**检查项**：
- [ ] 支持 4 类漏洞检测
- [ ] 准确率 ≥ 75%
- [ ] 通过 50 个测试用例

**决策**：
- ✅ 继续 → 进入工业质量阶段
- ⚠️ 需优化 → 延长 1-2 周

#### M3: 工业质量（Week 20）

**检查项**：
- [ ] 完整 C 标准支持
- [ ] 准确率 ≥ 80%
- [ ] 通过 100 个测试用例
- [ ] VS Code 插件可用

**决策**：
- ✅ 继续 → 准备发布
- ⚠️ 需改进 → 延长 2-4 周

#### M4: 正式发布（Week 24）

**检查项**：
- [ ] 所有功能完成
- [ ] 文档完整
- [ ] 性能达到要求
- [ ] 无严重 Bug

**决策**：
- ✅ 发布 → v1.0 正式版
- ⚠️ 需修复 → 发布 RC 版

---

## 7. 资源需求

### 7.1 人力资源

#### 团队配置（推荐）

**最小团队**（2 人）：
- 1 名核心开发者（全职）
- 1 名测试/文档（兼职）

**推荐团队**（3-4 人）：
- 2 名核心开发者（全职）
- 1 名测试工程师（全职）
- 1 名技术文档（兼职）

**理想团队**（5+ 人）：
- 3 名核心开发者（全职）
- 1 名测试工程师（全职）
- 1 名技术文档（全职）

#### 技能要求

**核心开发者**：
- 精通 C++（3 年+ 经验）
- 熟悉 LLVM/Clang（有经验优先）
- 了解编译原理和形式化验证
- 有静态分析工具开发经验优先

**测试工程师**：
- 熟悉 C 语言
- 熟悉测试方法（单元测试、集成测试）
- 了解软件质量标准

**技术文档**：
- 优秀的技术写作能力
- 熟悉 Markdown 和文档工具
- 了解软件工程文档标准

### 7.2 技术资源

#### 开发环境

**硬件**：
- CPU：4 核心以上
- 内存：16 GB（推荐 32 GB）
- 磁盘：500 GB SSD

**软件**：
- 操作系统：Linux（Ubuntu 20.04+）
- 编译器：GCC 9+ 或 Clang 10+
- IDE：VS Code / CLion / Visual Studio
- 版本控制：Git

#### 依赖库

**必需**：
- LLVM/Clang 15+
- Z3 4.12+
- CMake 3.20+

**可选**：
- Google Test（单元测试）
- Doxygen（文档生成）
| Docker（容器化）

### 7.3 时间资源

#### 工作量估算

| 阶段 | 工作量（人周） | 说明 |
|------|---------------|------|
| MVP | 12-18 | 2 人 × 6-9 周 |
| 功能增强 | 12-16 | 2 人 × 6-8 周 |
| 工业质量 | 16-20 | 2 人 × 8-10 周 |
| **总计** | **40-54** | **约 10-13 个月（人）** |

#### 时间分配建议

**核心开发者**：
- 70%：编码实现
- 15%：代码审查
- 10%：文档编写
- 5%：会议和沟通

**测试工程师**：
- 60%：测试用例开发
- 20%：自动化测试
- 10%：Bug 报告和跟踪
- 10%：测试文档

---

## 8. 风险管理

### 8.1 技术风险

#### 风险 1：LLVM/Clang 集成复杂度高

**影响**：高

**概率**：中

**缓解措施**：
- 提前进行技术预研
- 参考 CPAchecker、SVF 等项目
- 寻求社区支持

**应急预案**：
- 简化 LLIR 设计
- 减少对 LLVM 的依赖

#### 风险 2：符号执行性能不达标

**影响**：高

**概率**：中

**缓解措施**：
- 早期性能测试
- 渐进式优化
- 参考最新研究成果

**应急预案**：
- 降低分析深度
- 增加超时机制
- 提供快速扫描模式

#### 风险 3：误报率过高

**影响**：中

**概率**：中

**缓解措施**：
- 结合抽象解释剪枝
- 机器学习辅助判断
- 用户反馈机制

**应急预案**：
- 提供误报标记功能
- 分级报告（高/中/低置信度）

### 8.2 进度风险

#### 风险 1：人员变动

**影响**：高

**概率**：低

**缓解措施**：
- 知识共享和文档化
- 代码审查
- 备份开发者

#### 风险 2：需求变更

**影响**：中

**概率**：中

**缓解措施**：
- 需求优先级管理
- 迭代开发
- 及时沟通

#### 风险 3：技术难题攻关时间超预期

**影响**：中

**概率**：中

**缓解措施**：
- 时间缓冲（20%）
- 技术预研
- 寻求专家咨询

### 8.3 应对措施

#### 通用应对策略

1. **时间缓冲**：每个阶段预留 20% 时间
2. **优先级管理**：P0 功能优先，P2/P3 可延后
3. **增量交付**：每个阶段都有可演示的成果
4. **定期检查**：每周进度检查，及时调整
5. **风险监控**：建立风险跟踪表

#### 风险跟踪表

| 风险 | 影响 | 概率 | 负责人 | 状态 | 应对措施 |
|------|------|------|--------|------|---------|
| LLVM 集成复杂 | 高 | 中 | 开发者 | 监控中 | 技术预研 |
| 性能不达标 | 高 | 中 | 开发者 | 监控中 | 性能测试 |
| 误报率高 | 中 | 中 | 开发者 | 监控中 | 结合抽象解释 |
| 人员变动 | 高 | 低 | PM | 监控中 | 文档化 |

---

## 附录：时间表（甘特图）

```
Week:  1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17  18  19  20  21  22  23  24
MVP:   [===== 项目搭建 =====][==== LLIR + 符号执行 ====][== Z3 + 检测器 ==]
Enh:                                         [== 抽象解释 ==][== 混合 + 堆 ==][== 泄漏 + 整数 ==]
Indx:                                                             [== C 标准 ==][== 外部函数 ==]
Opt:                                                                                 [== 并行 + 性能 ==][== IDE + 报告 ==]
       ↑M1                          ↑M2                                  ↑M3                   ↑M4
```

---

**文档结束**
